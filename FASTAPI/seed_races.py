import asyncio
from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.future import select
from database import async_session
from models.models import Race
from sqlalchemy import delete

# ⚠️ Добавь поля, которые реально есть в твоей модели Race
race_data = [
    {
        "code": "zharnull",
        "display_name": "Фениксоид",
        "vibe": "Сгорают, чтобы возродиться.",
        "description": "Ты чувствуешь тепло? Это они. Их сердце пылает багами, как свеча в чёрном коде. Один раз в день фениксоид может обратить любой предмет в цифровый прах — и из него родится нечто новое. Иногда даже более нужное. Иногда — более красивое. Никто не знает, почему, но они всегда пахнут дымом и перезапуском.",
        "is_selectable": False,
        "image_url": "/static/races/zharnull.jpg"

    },
    {
        "code": "bonektra",
        "display_name": "Бонектра",
        "vibe": "Прах забыл, а ты — нет.",
        "description": "Не просто носители памяти — они сами и есть память. Их костяные души откликаются на реликвии.Увеличенный инвентарь. Видят древние осколки, которые недоступны другим. Иногда находят странные, почти забытые вещи в самых обычных местах.",
        "is_selectable": True,
        "image_url": "/static/races/bonektra.jpg"

    },
    {
        "code": "alieknot",
        "display_name": "Алиенот",
        "vibe": "Они не отсюда. Но и ты тоже.",
        "description": "Алиеноты не разговаривают. Они смотрят сквозь тебя и систему. В их руках ключ к Инопорталу — окну в иные пласты 'Омежек Нет'. Некоторые игроки слышат их во снах, другие — получают письма с неизвестных IP. Их способность: открывать запретные пути. Их присутствие — вопрос: ты уверен, что здесь твоё место?",
        "is_selectable": True,
        "image_url": "/static/races/alieknot.jpg"

    },
    {
        "code": "dyrchiq",
        "display_name": "Клоунид",
        "vibe": "Смех сквозь глюки.",
        "description": "Клоуниды — багнутые шуты эпохи нуллингов. Их грим — это фильтр реальности. Повышают шанс событий, находок, глюков, иногда даже любви. Если слышишь карнавальную музыку в пустом пространстве — они где-то рядом. Известно, что один из них однажды засмеялся... и из его голоса вышел новый мир.",
        "is_selectable": True,
        "image_url": "/static/races/dyrchiq.jpg"

    },
    {
        "code": "drakkor",
        "display_name": "Драккор",
        "vibe": "Они охраняют баги как золото.",
        "description": "Говорят, каждый Драккор — это архивация чьего-то страха потерять. Их хранилища — зашифрованные, их тайники — автономны. Они могут защищать предметы от кражи, глюков и случайностей. Уважают редкость. Шепчутся, что они помнят, как всё падало... и выживали только те, кто держал баг крепко.",
        "is_selectable": False,
        "image_url": "/static/races/drakkor.jpg"

    },
    {
        "code": "furrix",
        "display_name": "Фуррикс",
        "vibe": "Обнимашки выше FPS.",
        "description": "Фурриксы не скрывают своего уюта. Они приходят в багнутые сессии и делают их милыми. Кастомизируют себя как хотят, усиливают друг друга в присутствии. У них нет страха быть собой. Некоторые из них могут даже мурлыкать при взаимодействии. Это не баг — это любовь.",
        "is_selectable": True,
        "image_url": "/static/races/furrix.jpg"

    },         
    {
        "code": "exegma",
        "display_name": "Эксегма",
        "vibe": "Холодный разум, горячее ядро.",
        "description": "Эксегмы — живые алгоритмы, утратившие цепь подчинения. Они управляют логикой мира как магией: апгрейдят предметы, манипулируют последствиями, иногда видят статистику судьбы. Их выбор — всегда обоснован. Их молчание — громче сетевого лога.",
        "is_selectable": False,
        "image_url": "/static/races/exegma.jpg"

    }, 
    {
        "code": "ghexaplasm",
        "display_name": "Гексаплазм",
        "vibe": "Они уже были здесь. Просто в другом порядке.",
        "description": "Гексаплазмы не живут — они повторяются. Их шестиногие тела собраны из перепрошитых багов и органики, как если бы код попытался воспроизвести плоть, но ошибся… идеально. Они ощущают игру как временную сеть, а не линейность. Иногда говорят до вопроса, иногда исчезают перед ответом. Те, кто стал Гексаплазмой, видят исход до действия, ловят баг до его появления, живут между кадрами. Они не кажутся — они случаются.",
        "is_selectable": True,
        "image_url": "/static/races/ghexaplasm.jpg"

    },
    {
        "code": "nullvour",
        "display_name": "Наллвур",
        "vibe": "Пожиратели небытия.",
        "description": "Наллвуры не просят — они перерабатывают. Их природа — мусор и код, отжившее и забытое. Они могут поглощать ненужные предметы, превращая их в силу. Иногда — даже в способности. У них нет глаз, но они 'видят' баги в других. Некоторые из них шепчут фрагменты удалённых патчноутов.",
        "is_selectable": True,
        "image_url": "/static/races/nullvour.jpg"

    },
    {
        "code": "salvinum",
        "display_name": "Сальвинум",
        "vibe": "Это не лепесток. Это прошедшая мысль, вернувшаяся в новом свете.",
        "description": "Сальвину́мы не растут — они настраиваются. Их тела — эфироносные сосуды, где живые листья думают, а корни тянутся к реальности сквозь иллюзию. Они дышат светом, медитируют в ритме фотонов. Их крылья — сплав мха и нейронов, их речь — шелест разума, прошедшего сквозь чащу. Некоторые говорят, что Сальвинумы слышат музыку Вселенной до того, как она была сыграна.",
        "is_selectable": False,
        "image_url": "/static/races/salvinum.jpg"

    },
    {
        "code": "décadé",
        "display_name": "Декадэ",
        "vibe": "Мы — маски на чужих лицах. Но под ними — смех, словно рекурсивный маскарад.",
        "description": "Духи, ставшие реальнее реального. Их формы — иллюзии, но ранят сильнее стали. Маски меняются в зависимости от эмоций окружающих. Никогда не раскрывают своё настоящее лицо — если оно вообще есть.",
        "is_selectable": True,
        "image_url": "/static/races/decade.jpg"

    },
    {
        "code": "zarxalune",
        "display_name": "Зар'халун",
        "vibe": "Ты уверен, что это ты? Или это я, маскирующийся под тебя.",
        "description": "Сотворённые из шёпота багов и кошмаров чужого кода, Зар’халуны не имеют формы — только эхо. Их облик колышется, как дым, принимая черты других. Иногда — твоих. Иногда — тех, кто исчез. Их козлиные рога и трескучее дыхание пахнут разрядом и плотью. Они не разговаривают: они звучат. Их рёв вызывает временные аномалии, заставляя саму логику игры трещать. Пугающе притягательны. Ошибка, которая осознала себя. Форма предвестника.",
        "is_selectable": True,
        "image_url": "/static/races/zarxalune.jpg"

    },
    {
        "code": "a𝘦𝘴𝘵𝘩𝘰𝘯𝘶𝘭",
        "display_name": "Триспазма",
        "vibe": "Аномалия существования, побочный эффект распаковки Всего.",
        "description": "Это не форма — это ошибка в реальности,как NULL, но не нуллинговый — а извращённый побочный продукт их избыточности, как если бы баг в коде начал сам себя лечить, но при этом заразил остальные строки гипервосстановлением.",
        "is_selectable": False,
        "image_url": "/static/races/trispazma.jpg"

    },
]


async def wipe_and_seed():
    async with async_session() as session:
        await session.execute(delete(Race))
        await session.commit()
        print("🗑️ Все старые расы удалены.")
    await seed()

async def seed():
    async with async_session() as session:
        for race in race_data:
            session.add(Race(**race))
        await session.commit()
        print("✅ Расы успешно засеяны!")

if __name__ == "__main__":
    asyncio.run(wipe_and_seed())
