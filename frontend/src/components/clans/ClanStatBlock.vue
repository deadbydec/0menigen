<template>
  <div class="clan-stat-block stat-block">
    <h2>üìä –ö–ª–∞–Ω–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>

    <ul>
      <li>–í—Å–µ–≥–æ –∫–ª–∞–Ω–æ–≤: <strong>{{ stats.total_clans }}</strong></li>
      <li>–°–æ–∑–¥–∞–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é: <strong>{{ stats.new_this_week }}</strong></li>

      <li v-if="stats.top_by_level">
        üèÜ –ö–ª–∞–Ω –Ω–µ–¥–µ–ª–∏ (–ø–æ —É—Ä–æ–≤–Ω—é): 
        <strong>{{ stats.top_by_level.name }}</strong> ‚Äî {{ stats.top_by_level.level }} —É—Ä.
      </li>

      <li v-if="stats.top_by_xp_week">
        üî• –õ–∏–¥–µ—Ä –ø–æ –æ–ø—ã—Ç—É –∑–∞ –Ω–µ–¥–µ–ª—é: 
        <strong>{{ stats.top_by_xp_week.name }}</strong>
      </li>

      <li v-if="stats.most_members">
        üë• –°–∞–º—ã–π –º–∞—Å—Å–æ–≤—ã–π –∫–ª–∞–Ω: 
        <strong>{{ stats.most_members.name }}</strong> ({{ stats.most_members.member_count }} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
      </li>
    </ul>
  </div>
</template>

<script setup>
import { onMounted } from 'vue'
import { useClansStore } from "@/store/clans"
import { storeToRefs } from "pinia"

const clansStore = useClansStore()
const { clanStats } = storeToRefs(clansStore)
const stats = computed(() => clanStats.value || {})

onMounted(() => {
  clansStore.fetchClanStats()
})
</script>

<style scoped>

.clan-stat-block {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid #444;
  height: 150px;
  border-radius: 12px;
  text-align: left;
}

.stat-block ul {
  line-height: 1.4;
  list-style: none; /* –£–±–∏—Ä–∞–µ—Ç —Ç–æ—á–∫–∏ */
}
</style>
