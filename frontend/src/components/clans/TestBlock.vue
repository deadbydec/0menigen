<template>
  <div class="test-block clan-block">
    <h2>üöÄ –°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –∫–ª–∞–Ω</h2>

    <p>
      –ú–µ—á—Ç–∞–µ—à—å –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–º–ø–µ—Ä–∏—é, –≥–¥–µ —Ç—ã ‚Äî –ª–∏–¥–µ—Ä? –¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∞–Ω –∏ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤ –Ω–µ–≥–æ –¥—Ä—É–≥–∏—Ö –û–º–µ–∂–µ–∫.
    </p>

    <ul class="conditions">
      <li>üîπ –î–æ—Å—Ç–∏–≥–Ω–∏ <strong>100 —É—Ä–æ–≤–Ω—è</strong> <em>–∏–ª–∏</em></li>
      <li>üî∏ –ê–∫—Ç–∏–≤–∏—Ä—É–π <strong>VIP-–ø–æ–¥–ø–∏—Å–∫—É</strong> –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è</li>
    </ul>

    <div class="actions">
      <button 
        v-if="canCreateClan" 
        class="create-btn" 
        @click="showModal = true"
      >
        ‚ú® –°–æ–∑–¥–∞—Ç—å –∫–ª–∞–Ω
      </button>

      <div v-else class="locked-msg">
        üõë –£—Å–ª–æ–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã. –¢—ã –ø–æ–∫–∞ –Ω–µ –º–æ–∂–µ—à—å —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞–Ω.
      </div>
    </div>
    <CreateModal :visible="showModal" @close="showModal = false" />
  </div>
  
</template>

<script setup>
import { ref, computed } from "vue"
import { storeToRefs } from "pinia"
import { usePlayerStore } from "@/store/player"
import CreateModal from "@/components/clans/CreateModal.vue" // –ø—É—Ç—å –ø–æ —Ñ–∞–∫—Ç—É
// –∏–ª–∏ '@/modals/CreateModal.vue' ‚Äî –ø—Ä–æ–≤–µ—Ä—å —Å–≤–æ–π

const { player } = storeToRefs(usePlayerStore())

const showModal = ref(false)

const canCreateClan = computed(() => {
  if (!player.value) return false
  return player.value.level >= 100 || !!player.value.vip_subscription
})
</script>


<style scoped>
.test-block {
  background:rgba(38, 32, 39, 0.74);
  border: 1px solid #444;
  border-radius: 12px;
  padding: 1.5em;
  margin-bottom: 0em;
  text-align: left;
}
.conditions {
  margin-top: 0.5em;
  margin-bottom: 1em;
  padding-left: 1.2em;
}
.create-btn {
  background:linear-gradient(20deg, rgb(5, 73, 70), rgb(13, 211, 211));
  color: rgb(219, 219, 219);
  padding: 0.6em 1.2em;
  margin-left: 180px;
  width: 180px;
  font-weight: bold;
  border-radius: 8px;
}
.locked-msg {
  opacity: 0.6;
  font-style: italic;
}
</style>
